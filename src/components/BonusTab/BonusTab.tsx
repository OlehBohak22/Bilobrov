import s from "./BonusTab.module.css";
import { useSelector } from "react-redux";
import { RootState } from "../../store";

export const BonusTab = () => {
  const user = useSelector((state: RootState) => state.user?.user?.meta);

  console.table(user?.bonus_history);

  if (!user) {
    return;
  }

  return (
    <div className={s.tab}>
      <h2>
        <span></span>
        <span></span>
      </h2>

      <div className={s.flex}>
        <div className={s.bonusContainer}>
          <div className={s.bonusQty}>
            <svg
              viewBox="0 0 120 120"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect
                x="0.5"
                y="0.5"
                width="119"
                height="119"
                rx="59.5"
                stroke="#D63D44"
              />
              <path
                d="M82.2246 42.6665H66.5C68.9635 44.6021 71.1532 47.2249 73.947 47.9894C75.1551 47.7571 76.6275 46.257 78.0056 47.0894C79.3836 47.9217 78.8928 49.925 79.2703 51.1348C80.1292 52.0542 82.1019 52.6252 82.1019 54.2801C82.0971 54.5575 82.0387 54.8312 81.9302 55.0854C81.8217 55.3395 81.6651 55.5691 81.4695 55.7609L86 59.9998V46.5377C86 45.511 85.6022 44.5263 84.8942 43.8004C84.1862 43.0744 83.2259 42.6665 82.2246 42.6665Z"
                fill="#D63D44"
              />
              <path
                d="M79.9161 57.3878C79.9374 58.1527 79.7944 58.9116 79.5 59.5953L86 66.4998V61.3652C84.9014 60.2177 81.7305 56.8724 80.5903 55.6665C79.8995 56.0944 79.9744 56.5028 79.9161 57.3878Z"
                fill="#D63D44"
              />
              <path
                d="M74.1419 59.7373C72.9626 59.9679 71.4955 61.3881 70.1583 60.595C68.8212 59.8019 69.2855 57.8836 68.9048 56.74C68.633 56.4658 68.3197 56.2355 67.9762 56.0575C66.3976 55.246 65.2927 53.5121 66.9919 52.1288L55.6634 42.6665H37.7143C36.7292 42.6665 35.7844 43.0552 35.0879 43.747C34.3913 44.4388 34 45.3771 34 46.3555V71.4775C34 72.4559 34.3913 73.3942 35.0879 74.086C35.7844 74.7778 36.7292 75.1665 37.7143 75.1665H82.2854C83.2705 75.1665 84.2152 74.7778 84.9118 74.086C85.6083 73.3942 85.9997 72.4559 85.9997 71.4775V69.0612L76.8626 60.761C75.9526 60.6688 74.9312 59.8388 74.1419 59.7373ZM54.9577 63.5831C53.7506 66.7925 49.3213 68.7292 48.4578 68.9321C47.5292 68.7292 43.1185 66.7925 41.9578 63.5831C41.0292 61.4158 43.2764 58.5568 45.0964 58.5107C46.3147 58.4241 47.5221 58.7887 48.4856 59.5344C49.4503 58.7911 50.6569 58.4267 51.8749 58.5107C53.6299 58.5568 55.8491 61.425 54.9577 63.5831Z"
                fill="#D63D44"
              />
              <path
                d="M67.6953 54.0715C68.297 54.7432 69.8653 55.3015 70.3486 56.1908C70.8319 57.0802 70.6248 58.6035 70.9798 59.474C71.838 59.1996 73.1695 58.2818 74.1953 58.3197C75.2211 58.3575 76.5034 59.2658 77.4897 59.4361C77.6771 58.5846 77.4897 57.0234 78.0519 56.1908C78.4653 55.6273 79.0132 55.1666 79.6498 54.8473C80.0428 54.6412 80.3964 54.3725 80.6953 54.0526C80.0838 53.3335 78.5352 52.832 78.0519 51.9237C77.5686 51.0154 77.7659 49.5111 77.4207 48.6406C76.5428 48.915 75.2408 49.8328 74.1953 49.7949C73.1498 49.7571 71.9958 48.9623 70.9305 48.6785C70.6543 49.4638 70.9305 51.1101 70.3486 51.9237C69.7666 52.7374 68.2773 53.343 67.6953 54.0715Z"
                fill="#D63D44"
              />
              <path
                d="M68.1378 49.8139C68.1141 49.0226 68.2965 48.2396 68.6654 47.5493C67.3464 46.3931 64.3993 43.794 63.0986 42.6665H57.832L67.6648 51.3332C68.1833 50.9987 68.0741 50.5019 68.1378 49.8139Z"
                fill="#D63D44"
              />
              <path
                d="M51.283 60.2832C50.4401 60.3116 49.6371 60.6774 49.0304 61.3095C48.8752 61.4691 48.669 61.5582 48.4547 61.5582C48.2403 61.5582 48.0342 61.4691 47.879 61.3095C47.2734 60.6701 46.4651 60.3032 45.618 60.2832C45.1107 60.4316 44.6766 60.7868 44.4074 61.2739C44.1381 61.7609 44.0546 62.3418 44.1746 62.894C44.6836 64.5865 47.1865 66.144 48.4547 66.7832C49.7145 66.144 52.2258 64.5865 52.7347 62.894C52.8544 62.3406 52.7698 61.7587 52.4988 61.2714C52.2279 60.7841 51.7918 60.4297 51.283 60.2832Z"
                fill="#D63D44"
              />
            </svg>

            <div className={s.balance}>
              <p>Баланс картки:</p>
              <span className={s.qty}>{user.bonus}</span>
              <span className={s.text}>бонусів</span>
            </div>
          </div>

          <img src="/images/bilobrov-bonus-card.png" alt="Card" />
        </div>

        <div className={s.bonusTransactionList}>
          <h4>Транзакції по картці:</h4>

          {user?.bonus_history ? (
            <ul>
              {user.bonus_history.map((item, index) => (
                <li key={index}>
                  <p>{item.type}</p>
                </li>
              ))}
            </ul>
          ) : (
            <p>Немає транзакцій</p>
          )}
        </div>
      </div>
    </div>
  );
};
